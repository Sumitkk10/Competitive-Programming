
for(int submask = r; submask; submask = (submask - 1) & (r)){
    // this is a submask of r which only includes set bits in the position of r.
}
